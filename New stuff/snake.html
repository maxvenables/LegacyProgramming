<!doctype html> <!-- always start document like this -->
<html> <!-- everything enclosed by html tags -->
    <body> <!-- contains visable data -->
        <!--<canvas id="myCanvas" width="300" height = "300" style="border:1px solid #d3d3d3" ></canvas>--> <!-- Generates canvas with name myCanvas width 200 heght 200 with a 1 pixel border of colour d3d3d3-->
        <script>
          class grid{
            constructor(height, width, filler){
              this.height = height;
              this.width = width;
              this.gameGrid = [];
              for (var i = 0; i < height; i++){
                this.gameGrid.push([]);
                for (var j = 0; j < width; j++){
                  this.gameGrid[i].push(filler)
                }
              }
            }
            getter(x,y){
              return this.gameGrid[x][y]
            }
            setter(value,x,y){
              //console.log(x,y)
              console.log(this.gameGrid[x][y]);
              console.log(value);
              this.gameGrid[x][y] = value;
            }
          }

          class snek{
            constructor(x, y, symbol, direction){
              this.x = x;
              this.y = y;
              this.symbol = symbol;
              this.queue = [];
              this.queue.unshift([this.x,this.y]);
              this.direction = direction;
              this.updown = 0;
              this.leftright = 0;
              this.directiondeccide();
              this.updategrow();
            }
            updategrow(){
              var tempx = this.x;
              var tempy = this.y;
              //this.x = this.x + this.leftright
              //this.y = this.y + this.updown
              this.x = Math.abs((this.x + this.leftright) % cols)
              this.y = Math.abs((this.y + this.updown) % rows)
              if (this.x < 0){
                this.x += cols;
              }
              if (this.y < 0){
                this.y += rows;
              }
              //console.log(tempx, tempy)
              //console.log(this.x,this.y)
              // if (this.x > cols || this.x < 0){
              //   this.x = tempx
              // }
              // if (this.y > rows || this.y < 0){
              //   this.y = tempy
              // }
              this.queue.unshift([this.x,this.y]);
              //console.log(this.queue);
            }
            // updategrow(){
            //   var tempqueue = this.queue;
            //   var newx = this.queue[0][0] + this.leftright;
            //   var newy = this.queue[0][1] + this.updown;
            //   this.queue.unshift([newx,newy]);
            //   if (this.queue[0][0] > cols - 1 || this.queue[0][1] < 0){
            //     this.queue = tempqueue;
            //   }
            //   if (this.queue[0][1] > rows - 1 || this.queue[0][1] < 0){
            //     this.queue = tempqueue;
            //   }
            // }
            popa(){
              this.queue.pop();
              //console.log(this.queue);
            }
            directiondeccide(){
              if (this.direction === "left"){
                this.updown = 0
                this.leftright = -1
              }
              else if (this.direction === "right"){
                this.updown = 0
                this.leftright = 1
              }
              else if (this.direction === "up"){
                this.updown = -1
                this.leftright = 0
              }
              else if (this.direction === "down"){
                this.updown = 1
                this.leftright = 0
              }

            }
            updateDirection(newDirection){
              this.direction = newDirection;
              this.directiondeccide()
            }
        }





          var empty = 0;
          var snake = 1;
          var fruit = 2;

          var cols = 25;
          var rows = 25;
          var gridsize = 20


          var gameGrid = new grid(cols, rows, empty);
          var snak = new snek(6,6,snake,"left");
          gameGrid.gameGrid[0][0] = fruit;

          function main(grid,snek){
            canvas = document.createElement("Canvas")
            canvas.width = cols * gridsize;
            canvas.height = rows * gridsize;
            canvas.style = "border:1px solid #000000";
            var ctx = canvas.getContext("2d");
            document.body.appendChild(canvas);
            document.addEventListener("keydown", function(event){
              if(event.keyCode == 65){
                snek.updateDirection("left");
              }
              else if (event.keyCode == 83){
                snek.updateDirection("down");
              }
              else if (event.keyCode == 87){
                snek.updateDirection("up")
              }
              else if (event.keyCode == 68){
                snek.updateDirection("right")
              }
            });
            draw(ctx,grid,snek);
            loop(ctx, grid, snek);
          }

          function draw(ctx, grid, snek){
            ctx.clearRect(0,0,cols*gridsize,rows*gridsize);
            for (i in grid.gameGrid){
              for (j in grid.gameGrid[i]){
                if (grid.gameGrid[i][j] !== empty){
                  x = i*gridsize;
                  y = j*gridsize;
                  if (grid.gameGrid[i][j] == snake){
                    ctx.fillStyle = "#FF0000";
                  }
                  else if (grid.gameGrid[i][j] == fruit){
                    ctx.fillStyle = "#0000FF"
                  }
                  ctx.fillRect(x,y,gridsize,gridsize);
                }
              }
            }

            update(grid,snek);
            //console.log(grid.gameGrid);
          }

          function loop(ctx,grid,snek){
            setInterval( function() {draw(ctx, grid, snek);}, 100);
          }

          function update(grid,snek){
            lastsnek = snek.queue[snek.queue.length-1];
            grid.setter(empty, lastsnek[0], lastsnek[1]);
            snek.updategrow();
            snek.popa();
            for (i in snek.queue){
              grid.setter(snake, snek.queue[i][0], snek.queue[i][0]);
            }
          }

          main(gameGrid,snak);
        </script>
    </body>
</html> <!-- tags with / indicate end-->
